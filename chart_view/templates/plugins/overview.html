{% extends "plugins/base.html" %}{% load i18n %}

{% block before %}
<div class="row">
    <div class="span12">
        <ul class="nav nav-tabs">
            <li class="active"><a href="?variable=negotiation_status">Negotiation status</a></li>
            <li><a href="?variable=implementation_status">Implementation status</a></li>
            <li><a href="?variable=intention_of_investment">Intention of investment</a></li>
            <li><a href="?variable=agriculture">Investment in agriculture</a></li>
        </ul>
    </div>
</div>
{% endblock %}

{% block description %}
<div class="desc">
    <p class="negotiation_status">Deals divided by negotiation status. Since this chart shows all deals in the database, there is no option to select concluded, intended or failed deals separately. <a href="/about/#how-does-the-global-observatory-deal-with-different-stages-of-negotiation-and-implementation" class="toggle-tooltip left" title="The LM has two key variables to describe the status of a land deal: the negotiation status and the implementation status. For further information press the question mark."><i class="icon icon-question-sign"> </i></a></p>
    <p class="implementation_status" style="display: none">Deals divided by implementation status. Since this chart shows all deals in the database, there is no option to select concluded, intended or failed deals separately. <a href="/about/#how-does-the-global-observatory-deal-with-different-stages-of-negotiation-and-implementation" class="toggle-tooltip left" title="The LM has two key variables to describe the status of a land deal: the negotiation status and the implementation status. For further information press the question mark."><i class="icon icon-question-sign"> </i></a></p>
    <p class="intention_of_investment" style="display: none">Deals divided by intention of investment.</p>
    <p class="agriculture" style="display: none">Deals having „agriculture“ as main intention of investment disaggregated into sub-sections.</p>

    <div class="btn-group views">
      <button type="submit" class="btn active" name="filter" value="deals">{% trans "No. of deals" %}</button>
      <button type="submit" class="btn" name="filter" value="hectares">{% trans "Size in hectares" %}</button>
    </div>

</div>
{% endblock %}

{% block legend %}{% endblock %}

{% block data %}
<div class="row">
    <div class="span12">
        <canvas id="bar" width="1200" height="390"></canvas>

    </div>
</div>
{% endblock %}

{% block after %}
{{ block.super }}
<script type="text/javascript" src="/media/js/vendor/RGraph.pie.js"></script>
<script type="text/javascript" src="/media/js/vendor/RGraph.bar.js"></script>
<script type="text/javascript" src="/media/js/vendor/RGraph.common.core.js"></script>
<script type="text/javascript" src="/media/js/vendor/RGraph.common.effects.js"></script>
<script type="text/javascript" src="/media/js/vendor/RGraph.common.dynamic.js"></script>
<script type="text/javascript" src="/media/js/vendor/RGraph.common.tooltips.js"></script>
<script type="text/javascript">
$(document).ready(function () {
//    alert('ready!');
    $(".nav-tabs a").click(function (e) {
        e.preventDefault();
        var c_self = this;
        $(".nav-tabs .active").removeClass("active");
        $(c_self).parents("li").addClass("active");
        ($(".nav-tabs .active a").attr("href").indexOf("intention") > -1 && $(".negotiation_status").show() || $(".negotiation_status").hide());
        $(".desc p").hide().filter("." + $(".nav-tabs .active a").attr("href").replace("?variable=", "")).show();
        draw();
        return false;
    });
    $(".nav-tabs .active a").click();
    $(".views .btn").click(function (e) {
        e.preventDefault();
        var c_self = this;
        $(".views .active").removeClass("active");
        $(c_self).addClass("active");
        draw();
        return false;
    });
    $(".views .btn.active").click();
});
</script>
{% endblock %}
