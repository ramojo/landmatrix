function drawPie(b,e,a){var f=Raphael(b,e,e),b=parseFloat($(b).data("title").toString().replace(/[^0-9\.]/g,""));f.piechart(e/2,e/2,e/2,[b,100-b],{colors:["#da891e","#444444"],strokewidth:0});a&&(c=f.circle(e/2,e/2,e/2-1),c.attr("stroke","#fff"),c.attr("stroke-width","2"))}function drawHorizontalLineChart(b,e,a,f,g){b=Raphael(b,f,g);b.rect(0,0,f,g).attr({fill:"rgb(216, 216, 216)","stroke-width":0});b.rect(0,0,f*(e/100),g).attr({fill:a,"stroke-width":0})}
function drawVerticalLine(b,e,a){return b.path("M "+(e+" "+(a-10))+" l "+("0 -"+(b.height-40-(b.height-a)))).attr({fill:"#fff",stroke:"#89959e","stroke-width":2,"stroke-opacity":1,"stroke-dasharray":"."})}function getZoomedCoords(b,e,a){var f=$("#map").width(),g=$("#map").height();a.left=a.x-a.width/2;a.top=a.y-a.height/2;var g=g/a.height,d={};d.x=(b-a.left)*(f/a.width);d.y=(e-a.top)*g;d.x+=15;return d}
function showTooltip(b){if(b==window)return!1;var e,a,f=$("#tooltip-container");if($(b).data("title")){b=$(b);e=b.data("title");a=b.offset();a.width=b.width();a.height=b.height();var g=a.top+a.height/2+b.height()/2}else a=b.getBBox(),(e=$("#map").data("zoom-coords"))?(e=getZoomedCoords(a.x,a.y,e),a.top=$("#map").offset().top+e.y,a.left=$("#map").offset().left+e.x,g=a.top+a.height/2+f.height()):(a.top=$("#map").offset().top+a.y,a.left=$("#map").offset().left+a.x,g=a.top+a.height/2+f.height()-20),e=
b.data&&b.data("title");b=a.left+a.width/2-f.width()/2;f.find("span.content").html(e);f.css({top:g+"px",left:b+"px"});e&&f.show()}function hideTooltip(){$("#tooltip-container").hide()}
$(document).ready(function(){$("[title]").each(function(){var d=$(this);d.data("title",d.attr("title"));d.removeAttr("title")});$(".tooltip").hover(function(d){return showTooltip(this,d)},function(d){return hideTooltip(this,d)});$(".pie-chart").each(function(){if(-1!=$(this).data("title").indexOf("100"))$(this).addClass("full");else{var d=$(this).hasClass("big")?84:$(this).hasClass("huge")?324:42;drawPie(this,d,$(this).hasClass("data-availability"))}});$(".horizontal-line-chart").each(function(){var d=
$(this).hasClass("democracy-index")?"rgb(162, 185, 204)":"rgb(197, 175, 137)",a=10*parseFloat($(this).data("title").toString().replace(/[^0-9\.]/g,""));drawHorizontalLineChart(this,a,d,90,10)});var b=$("table thead tr:first");0<b.size()&&(stickyHeaderTop=b&&b.offset().top||null,$(window).scroll(function(){$(window).scrollTop()+115>stickyHeaderTop?($("table thead tr:first").css({position:"fixed",top:"120px","z-index":"4"}),$("table").css({"margin-top":"72px"})):($("table thead tr:first").css({position:"static",
top:"0"}),$("table").css({"margin-top":"0"}))}));$("a.toggle").click(function(d){var a=$(this),b=$(a.attr("href"));if(b.is(":visible")){b.fadeOut();a.text(a.text().replace("Hide","Show"));b.attr("id")=="filters"&&$(".filter").fadeOut()&&$(".submit").fadeOut()}else{b.fadeIn();a.text(a.text().replace("Show","Hide"));b.attr("id")=="filters"&&$(".filter").fadeIn()&&$(".submit").fadeIn()}d.preventDefault();return false});-1<location.href.indexOf("filtered")&&$(".actions .button.toggle").click();var e=
function(d){d=$(d);$(".overlay:visible").fadeOut();d.fadeIn();d.children(".subnav").css("visibility","visible");$("#overlay-container").fadeIn()};$("a.show-overlay").click(function(d){var a=$(this).attr("href");e(a+"-overlay");window.location.hash=a;d.preventDefault()});$("a.hide-overlay").click(function(d){$(".overlay:visible").fadeOut();$("#overlay-container").fadeOut();window.location.hash="#_";d.preventDefault()});var a=function(d){var d=d.substring(1),a=$("#"+d);$(".subnav .select span:visible").hide();
$(".subnav .select span."+d).show();$(".subnav .select li.current").removeClass("current");$(".subnav .select li."+d).addClass("current");$(".page:visible").hide();a.fadeIn()};$("a.toggle-page").click(function(d){var b=$(this).attr("href");a(b);window.location.hash="#pages-"+b.substring(6);d.preventDefault();return false});$("a.select").click(function(d){var a=$(this);b=$(a.attr("href")+" input").attr("checked",a.hasClass("all")?true:false);d.preventDefault();return false});$("[placeholder]").focus(function(){var a=
$(this);if(a.val()==a.attr("placeholder")){a.val("");a.removeClass("placeholder")}}).blur(function(){var a=$(this);if(a.val()==""||a.val()==a.attr("placeholder")){a.addClass("placeholder");a.val(a.attr("placeholder"))}}).blur();$("[placeholder]").parents("form").submit(function(){$(this).find("[placeholder]").each(function(){var a=$(this);a.val()==a.attr("placeholder")&&a.val("")})});$("a.filter-compare").click(function(a){var b=$("table#summary tbody :checkbox");if(b.filter(":visible").size()>0){b.hide();
a.preventDefault();return false}b.size()>0?b.show():$("table#summary tbody tr td:first-child").each(function(a){$(this).prepend('<input type="checkbox" value="'+a+'" class="checkbox" name="compare_items" />')});$("tbody").attr("id","compare")});var f="#pages,#pages-about,#pages-partners,#pages-methodology,#pages-terminology,#pages-disclaimer,#report-a-deal,#analytical-report".split(","),g=window.location.hash;g&&-1!=jQuery.inArray(g,f)&&("#pages"!=g.substring(0,6)?e(g+"-overlay"):(e("#pages-overlay"),
(f=g.substring(7))&&a("#page-"+f)))});
